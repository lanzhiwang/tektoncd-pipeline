apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: hello
spec:
  steps:
    - name: echo
      image: alpine
      script: |
        #!/bin/sh
        set -x
        echo "Hello World"
        pwd
        env
        apk add tree
        tree -a /tekton
        tree -a /workspace

# + echo 'Hello World'
# Hello World

# + pwd
# /

# + env
# KUBERNETES_PORT=tcp://10.4.0.1:443
# KUBERNETES_SERVICE_PORT=443
# HOSTNAME=hello-task-run-pod
# SHLVL=1
# HOME=/root
# KUBERNETES_PORT_443_TCP_ADDR=10.4.0.1
# PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
# KUBERNETES_PORT_443_TCP_PORT=443
# KUBERNETES_PORT_443_TCP_PROTO=tcp
# KUBERNETES_PORT_443_TCP=tcp://10.4.0.1:443
# KUBERNETES_SERVICE_PORT_HTTPS=443
# KUBERNETES_SERVICE_HOST=10.4.0.1
# PWD=/

# + tree -a /tekton
# /tekton
# ├── bin
# │   └── entrypoint
# ├── creds
# ├── downward
# │   ├── ..2024_04_30_07_16_32.2193078238
# │   │   └── ready
# │   ├── ..data -> ..2024_04_30_07_16_32.2193078238
# │   └── ready -> ..data/ready
# ├── home
# ├── results
# ├── run
# │   └── 0
# │       └── status
# │           └── results
# ├── scripts
# │   └── script-0-fnjq9
# ├── steps
# │   ├── 0 -> /tekton/run/0/status
# │   └── step-echo -> /tekton/run/0/status
# └── termination

# 16 directories, 5 files

# + tree -a /workspace
# /workspace

# 0 directories, 0 files

# ---
# apiVersion: v1
# kind: Pod
# metadata:
#   annotations:
#     kubectl.kubernetes.io/last-applied-configuration: |
#       {"apiVersion":"tekton.dev/v1beta1","kind":"TaskRun","metadata":{"annotations":{},"name":"hello-task-run","namespace":"default"},"spec":{"taskRef":{"name":"hello"}}}
#     pipeline.tekton.dev/release: d714545
#     tekton.dev/ready: READY
#   creationTimestamp: "2024-04-30T01:59:36Z"
#   labels:
#     app.kubernetes.io/managed-by: tekton-pipelines
#     tekton.dev/task: hello
#     tekton.dev/taskRun: hello-task-run
#   name: hello-task-run-pod
#   namespace: default
#   ownerReferences:
#     - apiVersion: tekton.dev/v1
#       blockOwnerDeletion: true
#       controller: true
#       kind: TaskRun
#       name: hello-task-run
#       uid: 088ac82c-77cd-4e29-b61a-1db8d898fcf6
#   resourceVersion: "403082"
#   uid: 12929712-982a-4561-9f33-55ce4298b512
# spec:
#   activeDeadlineSeconds: 5400
#   containers:
#     - args:
#         - -wait_file
#         - /tekton/downward/ready
#         - -wait_file_content
#         - -post_file
#         - /tekton/run/0/out
#         - -termination_path
#         - /tekton/termination
#         - -step_metadata_dir
#         - /tekton/run/0/status
#         - -entrypoint
#         - /tekton/scripts/script-0-vjzm7
#         - --
#       command:
#         - /tekton/bin/entrypoint
#       image: alpine
#       imagePullPolicy: Always
#       name: step-echo
#       resources: {}
#       terminationMessagePath: /tekton/termination
#       terminationMessagePolicy: File
#       volumeMounts:
#         - mountPath: /tekton/scripts
#           name: tekton-internal-scripts
#           readOnly: true
#         - mountPath: /tekton/downward
#           name: tekton-internal-downward
#           readOnly: true
#         - mountPath: /tekton/creds
#           name: tekton-creds-init-home-0
#         - mountPath: /tekton/run/0
#           name: tekton-internal-run-0
#         - mountPath: /tekton/bin
#           name: tekton-internal-bin
#           readOnly: true
#         - mountPath: /workspace
#           name: tekton-internal-workspace
#         - mountPath: /tekton/home
#           name: tekton-internal-home
#         - mountPath: /tekton/results
#           name: tekton-internal-results
#         - mountPath: /tekton/steps
#           name: tekton-internal-steps
#           readOnly: true
#         - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
#           name: kube-api-access-2xfk6
#           readOnly: true
#   dnsPolicy: ClusterFirst
#   enableServiceLinks: true
#   initContainers:
#     - command:
#         - /ko-app/entrypoint
#         - init
#         - /ko-app/entrypoint
#         - /tekton/bin/entrypoint
#         - step-echo
#       image: ghcr.io/lanzhiwang/tekton-releases/tektoncd/pipeline/cmd/entrypoint:v0.57.0
#       imagePullPolicy: IfNotPresent
#       name: prepare
#       resources: {}
#       terminationMessagePath: /dev/termination-log
#       terminationMessagePolicy: File
#       volumeMounts:
#         - mountPath: /tekton/bin
#           name: tekton-internal-bin
#         - mountPath: /tekton/steps
#           name: tekton-internal-steps
#         - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
#           name: kube-api-access-2xfk6
#           readOnly: true
#       workingDir: /
#     - args:
#         - -c
#         - |
#           scriptfile="/tekton/scripts/script-0-vjzm7"
#           touch ${scriptfile} && chmod +x ${scriptfile}
#           cat > ${scriptfile} << '_EOF_'
#           IyEvYmluL3NoCmVjaG8gIkhlbGxvIFdvcmxkIgo=
#           _EOF_
#           /tekton/bin/entrypoint decode-script "${scriptfile}"
#       command:
#         - sh
#       image: ghcr.io/lanzhiwang/chainguard/busybox:v1.0.0
#       imagePullPolicy: IfNotPresent
#       name: place-scripts
#       resources: {}
#       terminationMessagePath: /dev/termination-log
#       terminationMessagePolicy: File
#       volumeMounts:
#         - mountPath: /tekton/scripts
#           name: tekton-internal-scripts
#         - mountPath: /tekton/bin
#           name: tekton-internal-bin
#         - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
#           name: kube-api-access-2xfk6
#           readOnly: true
#   nodeName: 192.168.137.27
#   preemptionPolicy: PreemptLowerPriority
#   priority: 0
#   restartPolicy: Never
#   schedulerName: default-scheduler
#   securityContext: {}
#   serviceAccount: default
#   serviceAccountName: default
#   terminationGracePeriodSeconds: 30
#   tolerations:
#     - effect: NoExecute
#       key: node.kubernetes.io/not-ready
#       operator: Exists
#       tolerationSeconds: 30
#     - effect: NoExecute
#       key: node.kubernetes.io/unreachable
#       operator: Exists
#       tolerationSeconds: 30
#   volumes:
#     - emptyDir: {}
#       name: tekton-internal-workspace
#     - emptyDir: {}
#       name: tekton-internal-home
#     - emptyDir: {}
#       name: tekton-internal-results
#     - emptyDir: {}
#       name: tekton-internal-steps
#     - emptyDir: {}
#       name: tekton-internal-scripts
#     - emptyDir: {}
#       name: tekton-internal-bin
#     - downwardAPI:
#         defaultMode: 420
#         items:
#           - fieldRef:
#               apiVersion: v1
#               fieldPath: metadata.annotations['tekton.dev/ready']
#             path: ready
#       name: tekton-internal-downward
#     - emptyDir:
#         medium: Memory
#       name: tekton-creds-init-home-0
#     - emptyDir: {}
#       name: tekton-internal-run-0
#     - name: kube-api-access-2xfk6
#       projected:
#         defaultMode: 420
#         sources:
#           - serviceAccountToken:
#               expirationSeconds: 3607
#               path: token
#           - configMap:
#               items:
#                 - key: ca.crt
#                   path: ca.crt
#               name: kube-root-ca.crt
#           - downwardAPI:
#               items:
#                 - fieldRef:
#                     apiVersion: v1
#                     fieldPath: metadata.namespace
#                   path: namespace
# status:
#   conditions:
#     - lastProbeTime: null
#       lastTransitionTime: "2024-04-30T02:02:48Z"
#       reason: PodCompleted
#       status: "True"
#       type: Initialized
#     - lastProbeTime: null
#       lastTransitionTime: "2024-04-30T02:02:59Z"
#       reason: PodCompleted
#       status: "False"
#       type: Ready
#     - lastProbeTime: null
#       lastTransitionTime: "2024-04-30T02:02:59Z"
#       reason: PodCompleted
#       status: "False"
#       type: ContainersReady
#     - lastProbeTime: null
#       lastTransitionTime: "2024-04-30T01:59:37Z"
#       status: "True"
#       type: PodScheduled
#   containerStatuses:
#     - containerID: containerd://a275684bd20a3f4c0a05a8d6faf8196c10a673317af97d6e1c4f83cfbe53b9cb
#       image: docker.io/library/alpine:latest
#       imageID: docker.io/library/alpine@sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b
#       lastState: {}
#       name: step-echo
#       ready: false
#       restartCount: 0
#       started: false
#       state:
#         terminated:
#           containerID: containerd://a275684bd20a3f4c0a05a8d6faf8196c10a673317af97d6e1c4f83cfbe53b9cb
#           exitCode: 0
#           finishedAt: "2024-04-30T02:02:58Z"
#           message: '[{"key":"StartedAt","value":"2024-04-30T02:02:58.361Z","type":3}]'
#           reason: Completed
#           startedAt: "2024-04-30T02:02:56Z"
#   hostIP: 192.168.137.27
#   initContainerStatuses:
#     - containerID: containerd://8342a9b9826c1a45cbd8e0b62c8b478706f6a5d330d3a4fe7e644232e64ffa6f
#       image: ghcr.io/lanzhiwang/tekton-releases/tektoncd/pipeline/cmd/entrypoint:v0.57.0
#       imageID: ghcr.io/lanzhiwang/tekton-releases/tektoncd/pipeline/cmd/entrypoint@sha256:2aedd9b42d8ba49bf88de4bb6e789088ce3f6ac34cd8303dad18c2608e8f4008
#       lastState: {}
#       name: prepare
#       ready: true
#       restartCount: 0
#       state:
#         terminated:
#           containerID: containerd://8342a9b9826c1a45cbd8e0b62c8b478706f6a5d330d3a4fe7e644232e64ffa6f
#           exitCode: 0
#           finishedAt: "2024-04-30T02:00:34Z"
#           reason: Completed
#           startedAt: "2024-04-30T02:00:33Z"
#     - containerID: containerd://a0c85d2a339cb6eb70f7efa27904928530c4aa5af5049b7ac5feb8a030ce8716
#       image: ghcr.io/lanzhiwang/chainguard/busybox:v1.0.0
#       imageID: ghcr.io/lanzhiwang/chainguard/busybox@sha256:48604a9f16721131879bbbbb05f28df84f82d3a83ff11fe523a293f485cd3591
#       lastState: {}
#       name: place-scripts
#       ready: true
#       restartCount: 0
#       state:
#         terminated:
#           containerID: containerd://a0c85d2a339cb6eb70f7efa27904928530c4aa5af5049b7ac5feb8a030ce8716
#           exitCode: 0
#           finishedAt: "2024-04-30T02:02:47Z"
#           reason: Completed
#           startedAt: "2024-04-30T02:02:47Z"
#   phase: Succeeded
#   podIP: 10.3.0.103
#   podIPs:
#     - ip: 10.3.0.103
#   qosClass: BestEffort
#   startTime: "2024-04-30T01:59:37Z"
